{
  "master": {
    "tasks": [
      {
        "id": "1",
        "title": "프로젝트 구조/개발환경 초기화",
        "description": "프로젝트 기본 구조를 만들고(Python 3.11+), 디렉터리 레이아웃 구성, Git 초기화, 가상환경 설정까지 완료한다.",
        "details": "Create project root with subdirectories: /api (FastAPI), /ui (Streamlit), /services (business logic), /models (data models), /utils (helpers), /tests. Initialize pyproject.toml or requirements.txt with base dependencies: fastapi, uvicorn, streamlit, langchain, langgraph, chromadb, google-generativeai (Gemini SDK), requests, pydantic, python-dotenv. Set up .gitignore for Python projects. Create .env.example template for environment variables (SAP_IS_API_BASE_URL, SAP_IS_API_KEY, GEMINI_API_KEY, CHROMA_PERSIST_DIR).",
        "testStrategy": "프로젝트 구조가 생성됐는지 확인하고, 가상환경이 정상 활성화되는지 및 기본 의존성이 충돌 없이 설치되는지 검증한다. `python --version`으로 Python 3.11+인지 확인한다.",
        "priority": "high",
        "dependencies": [],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-13T09:54:34.137Z"
      },
      {
        "id": "2",
        "title": "핵심 데이터 모델/스키마 정의",
        "description": "정규화된 로그(Toon), 오류 분석 결과, Case 엔티티를 위한 Pydantic 모델을 정의해 타입 안정성과 검증을 확보한다.",
        "details": "In /models/schemas.py, define:\n- ToonLog: message_id, timestamp, iflow_id, error_message, error_code, adapter_type, communication_type, status\n- ErrorAnalysis: error_type, root_causes (list), solution_steps (list), confidence_level, evidence (list), assumptions (list)\n- Case: id, toon_log (ToonLog), analysis (ErrorAnalysis), metadata (dict with tags, adapter, iflow), embedding (optional list of floats), created_at\n- APIResponse wrappers for consistent API responses\nUse Pydantic BaseModel with Field validators for required fields and data types.",
        "testStrategy": "모델 생성/검증, JSON 직렬화·역직렬화, 잘못된 입력 처리(ValidationError 등)를 단위 테스트로 확인한다.",
        "priority": "high",
        "dependencies": [
          "1"
        ],
        "status": "review",
        "subtasks": [],
        "updatedAt": "2025-12-13T13:18:00.640Z"
      },
      {
        "id": "3",
        "title": "환경설정(환경변수) 관리 모듈 구현",
        "description": "환경변수 로딩/검증을 담당하는 설정 모듈을 만들어 SAP IS API, Gemini API, ChromaDB 설정을 중앙에서 관리한다.",
        "details": "In /utils/config.py, use pydantic-settings or python-dotenv to load:\n- SAP_IS_API_BASE_URL (required)\n- SAP_IS_API_KEY (required)\n- SAP_IS_TEST_API_URL (optional for Phase 3)\n- GEMINI_API_KEY (required)\n- GEMINI_MODEL (default: 'gemini-1.5-pro')\n- CHROMA_PERSIST_DIR (default: './chroma_db')\n- LOG_LEVEL (default: 'INFO')\nImplement a Config class with validation that raises clear errors for missing required variables. Provide a get_config() singleton function.",
        "testStrategy": "정상 .env / 필수값 누락(예외 발생) / 기본값 fallback 동작을 테스트한다. 테스트에서는 환경변수를 mock해서 검증한다.",
        "priority": "high",
        "dependencies": [
          "1"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-13T15:47:30.335Z"
      },
      {
        "id": "4",
        "title": "SAP IS MPL OData API 클라이언트 구현",
        "description": "SAP Integration Suite OData API로 FAILED 메시지 처리 로그를 기간/옵션(iFlow) 필터로 조회하는 클라이언트를 구현한다.",
        "details": "In /services/sap_is_client.py, implement SAPISClient class:\n- __init__(base_url, api_key) using config\n- fetch_failed_logs(start_time, end_time, iflow_id=None) method\n- Build OData query with $filter for Status eq 'FAILED' and LogStart/LogEnd time range\n- Use requests library with proper authentication headers (Basic or OAuth based on SAP IS setup)\n- Handle pagination if results exceed single page\n- Return raw JSON response\n- Implement retry logic with exponential backoff for transient failures\n- Log all API calls for debugging",
        "testStrategy": "requests-mock으로 응답을 모킹해 성공/페이지네이션/iFlow 필터/401·500·timeout/재시도(backoff) 동작을 검증한다.",
        "priority": "high",
        "dependencies": [
          "2",
          "3"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-16T12:02:30.863Z"
      },
      {
        "id": "5",
        "title": "로그 정규화(Toon) 서비스 구현",
        "description": "SAP IS OData 원본 응답에서 필요한 필드만 추출·정규화(Toon)하고, 민감정보 마스킹 후 ToonLog로 변환한다.",
        "details": "In /services/toon_service.py, implement ToonService class:\n- normalize_logs(raw_odata_response) -> List[ToonLog]\n- Extract fields: MessageGuid (message_id), LogStart (timestamp), IntegrationFlowName (iflow_id), Status, AdapterMessageId, AdapterType, CustomStatus, Error text from nested structures\n- Implement sensitive data masking: email addresses, phone numbers, API keys in error messages using regex patterns\n- Handle missing or null fields gracefully with defaults\n- Validate extracted data against ToonLog schema\n- Log normalization statistics (total processed, skipped, errors)",
        "testStrategy": "샘플 OData 응답(정상/필드 누락/중첩 에러)을 입력으로 정규화 결과가 ToonLog 스키마를 만족하는지 확인한다. 이메일/키 등 민감정보 마스킹이 제대로 되는지 테스트한다.",
        "priority": "high",
        "dependencies": [
          "2",
          "4"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-16T12:01:47.569Z"
      },
      {
        "id": "6",
        "title": "오류 분석용 LLM 프롬프트 템플릿 설계/구현",
        "description": "Gemini가 일관된 오류 분석(JSON 스키마)을 출력하도록 버전 관리되는 프롬프트 템플릿을 설계·구현한다.",
        "details": "In /services/prompts.py, define prompt templates using LangChain PromptTemplate:\n- ERROR_ANALYSIS_PROMPT_V1: Include instructions to analyze ToonLog JSON, identify error type (connectivity, mapping, timeout, authentication, business logic, etc.), list root causes with evidence from log, propose concrete solution steps, assign confidence level (high/medium/low), clearly separate evidence-based conclusions from assumptions\n- Output format: strict JSON schema matching ErrorAnalysis model\n- Include few-shot examples for common SAP IS errors (SFTP connection failed, SOAP fault, timeout)\n- Version prompts (v1, v2) for A/B testing and rollback\n- Store prompt metadata (version, created_at, description)",
        "testStrategy": "샘플 ToonLog로 Gemini 호출을 수동 검증하고, 응답이 ErrorAnalysis 스키마로 파싱되는지 확인한다. 결론이 실제 로그 근거를 참조하는지(환각 최소화) 점검한다.",
        "priority": "high",
        "dependencies": [
          "2"
        ],
        "status": "in-progress",
        "subtasks": [],
        "updatedAt": "2025-12-16T12:42:24.558Z"
      },
      {
        "id": "7",
        "title": "Gemini LLM 연동 서비스 구현",
        "description": "Google Gemini API를 호출해 오류 분석을 수행하고, 응답 파싱/에러 처리/재시도를 포함한 통합 서비스를 구현한다.",
        "details": "In /services/gemini_service.py, implement GeminiService class:\n- __init__(api_key, model_name) from config\n- analyze_error(toon_log: ToonLog, prompt_version='v1') -> ErrorAnalysis\n- Use google.generativeai SDK (import google.generativeai as genai)\n- Configure genai.configure(api_key=api_key)\n- Use genai.GenerativeModel(model_name) with generation_config for JSON output\n- Format prompt with ToonLog data\n- Parse JSON response to ErrorAnalysis model\n- Implement retry logic for rate limits (429) and transient errors\n- Log token usage and latency\n- Handle malformed JSON responses with fallback parsing",
        "testStrategy": "Gemini 응답을 모킹해 정상 분석/JSON 파싱/429 처리/깨진 JSON 복구/API 오류를 검증한다. 반환된 ErrorAnalysis의 유효성을 확인한다.",
        "priority": "high",
        "dependencies": [
          "3",
          "6"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-14T02:25:16.185Z"
      },
      {
        "id": "8",
        "title": "ChromaDB 벡터 DB 설정",
        "description": "ChromaDB를 영속 저장으로 초기화하고, 임베딩 기반 유사도 검색을 위한 컬렉션/메타데이터를 구성한다.",
        "details": "In /services/vector_db.py, implement VectorDBService class:\n- __init__(persist_directory) from config\n- Use chromadb.PersistentClient(path=persist_directory)\n- Create or get collection 'error_cases' with metadata for filtering\n- Configure embedding function (use default or specify sentence-transformers model like 'all-MiniLM-L6-v2')\n- Implement connection health check\n- Set up collection schema with metadata fields: iflow_id, adapter_type, error_type, created_at\n- Enable hybrid search by configuring both dense embeddings and sparse keyword indexing if supported",
        "testStrategy": "DB 초기화/컬렉션 생성/재시작 후 데이터 유지 여부를 확인한다. 임베딩 함수 동작을 검증하고, 샘플 문서 저장·조회가 되는지 확인한다.",
        "priority": "medium",
        "dependencies": [
          "3"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-16T11:19:59.851Z"
      },
      {
        "id": "9",
        "title": "벡터 DB에 케이스 저장 기능 구현",
        "description": "분석된 에러 케이스를 ChromaDB에 저장(임베딩 포함)하여 향후 유사 케이스 재사용이 가능하도록 한다.",
        "details": "In /services/vector_db.py, extend VectorDBService:\n- store_case(case: Case) method\n- Generate document text from case: combine error_message, error_type, root_causes, solution_steps\n- Create metadata dict: iflow_id, adapter_type, error_type, error_code, timestamp\n- Use collection.add() with documents=[text], metadatas=[metadata], ids=[case.id]\n- ChromaDB will auto-generate embeddings using configured function\n- Handle duplicate IDs (update vs insert logic)\n- Return success status and stored case ID",
        "testStrategy": "단일/복수 저장, 중복 ID 처리(업데이트 vs 삽입)를 테스트한다. 임베딩이 생성되는지 확인하고, DB 조회로 저장 결과를 검증한다.",
        "priority": "medium",
        "dependencies": [
          "2",
          "8"
        ],
        "status": "in-progress",
        "subtasks": [],
        "updatedAt": "2025-12-16T12:42:27.013Z"
      },
      {
        "id": "10",
        "title": "유사 케이스 검색(하이브리드) 구현",
        "description": "새 에러에 대해 과거 케이스를 유사도 기반으로 검색하고(필요 시 하이브리드), 임계값으로 필터링해 반환한다.",
        "details": "In /services/vector_db.py, extend VectorDBService:\n- search_similar_cases(toon_log: ToonLog, top_k=5, similarity_threshold=0.7) -> List[Case]\n- Build query text from toon_log: error_message + error_code + adapter_type\n- Use collection.query() with query_texts=[query_text], n_results=top_k\n- Apply metadata filters: where={'iflow_id': toon_log.iflow_id} (optional)\n- Implement hybrid search: combine dense embedding similarity with keyword matching on error_code and adapter_type\n- Filter results by similarity_threshold (distance < threshold)\n- Parse results back to Case objects\n- Return sorted by similarity score (descending)",
        "testStrategy": "테스트 케이스를 미리 적재하고 유사/비유사 로그로 검색해 결과 품질을 확인한다. top_k/threshold/메타데이터 필터/빈 DB 등 엣지 케이스를 검증한다.",
        "priority": "medium",
        "dependencies": [
          "9"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "11",
        "title": "LangGraph 오류 분석 워크플로우 구현",
        "description": "유사도 검색 → 재사용 여부 판단 → Gemini 분석 → 결과 저장의 전체 파이프라인을 LangGraph로 오케스트레이션한다.",
        "details": "In /services/analysis_workflow.py, implement using LangGraph:\n- Define StateGraph with state: toon_log, similar_cases, analysis_result, confidence\n- Node 1 (search_similar): Call vector_db.search_similar_cases()\n- Node 2 (decide): If similar_cases with high similarity (>0.85), reuse solution; else proceed to AI analysis\n- Node 3 (ai_analyze): Call gemini_service.analyze_error()\n- Node 4 (store_result): Store new case in vector DB if new analysis was generated\n- Define edges with conditional routing based on similarity scores\n- Compile graph and expose run_analysis(toon_log: ToonLog) -> ErrorAnalysis method\n- Add logging at each node for observability",
        "testStrategy": "(1) 신규 에러(유사 없음) (2) 높은 유사도(재사용) (3) 낮은 유사도(LLM 진행) 시나리오로 경로가 올바르게 실행되는지, 상태 전이와 최종 결과를 검증한다.",
        "priority": "high",
        "dependencies": [
          "7",
          "10"
        ],
        "status": "in-progress",
        "subtasks": [],
        "updatedAt": "2025-12-16T12:23:26.053Z"
      },
      {
        "id": "12",
        "title": "FastAPI 기본 앱/엔드포인트 구성",
        "description": "FastAPI 앱 기본 구조를 만들고, CORS/로깅/헬스체크 등 공통 인프라와 기본 엔드포인트를 구성한다.",
        "details": "In /api/main.py, create FastAPI app:\n- app = FastAPI(title='SAP IS Error Analysis API', version='1.0.0')\n- Configure CORS middleware for Streamlit frontend\n- Set up structured logging with uvicorn\n- Add startup/shutdown event handlers for resource initialization\n- Implement GET /health endpoint returning status and version\n- Implement GET /api/v1/info endpoint with API metadata\n- Configure exception handlers for consistent error responses\n- Set up request ID middleware for tracing",
        "testStrategy": "`uvicorn api.main:app --reload`로 서버를 띄우고 `/health`, `/api/v1/info` 응답과 CORS 헤더를 확인한다. 잘못된 경로 요청 시 404 처리를 확인한다.",
        "priority": "high",
        "dependencies": [
          "1",
          "3"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-14T02:50:52.131Z"
      },
      {
        "id": "13",
        "title": "FAILED 로그 조회 API 구현",
        "description": "기간/옵션 필터로 FAILED 로그를 조회하고 Toon으로 정규화해 반환하는 FastAPI 엔드포인트를 구현한다.",
        "details": "In /api/routes/logs.py, implement:\n- POST /api/v1/logs/fetch endpoint\n- Request body: start_time (ISO datetime), end_time (ISO datetime), iflow_id (optional)\n- Validate datetime formats and range (end > start, not future)\n- Call sap_is_client.fetch_failed_logs()\n- Call toon_service.normalize_logs()\n- Return List[ToonLog] with pagination metadata\n- Implement query parameter for page_size (default 50, max 200)\n- Add response caching for repeated queries (5 min TTL)\n- Handle SAP IS API errors with appropriate HTTP status codes",
        "testStrategy": "유효/무효 날짜 범위, 필수값 누락, iFlow 필터를 테스트한다. SAP IS 클라이언트를 모킹해 페이지네이션/캐시/400·500·503 응답 처리를 검증한다.",
        "priority": "high",
        "dependencies": [
          "4",
          "5",
          "12"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "14",
        "title": "오류 분석 API 구현",
        "description": "특정 로그에 대해 유사도 검색 + AI 분석을 수행하는 오류 분석 엔드포인트를 구현하고, 필요 시 비동기로 처리한다.",
        "details": "In /api/routes/analysis.py, implement:\n- POST /api/v1/analysis/analyze endpoint\n- Request body: ToonLog object or message_id reference\n- Call analysis_workflow.run_analysis(toon_log)\n- Return ErrorAnalysis with metadata (analysis_id, timestamp, similar_cases_found count)\n- Implement async processing for long-running analyses\n- Add optional query parameter force_new_analysis (skip similarity search)\n- Store analysis result in vector DB\n- Return 202 Accepted for async processing with job_id, or 200 OK for sync\n- Implement rate limiting (max 10 requests/minute per user)",
        "testStrategy": "정상 ToonLog/잘못된 입력/force_new_analysis 플래그를 테스트한다. 비동기 처리와 rate limit을 검증하고, 워크플로우는 모킹해 동작을 확인한다. 동시 요청도 테스트한다.",
        "priority": "high",
        "dependencies": [
          "11",
          "12"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "15",
        "title": "유사 케이스 검색 API 구현",
        "description": "텍스트 또는 ToonLog 기반으로 과거 에러 케이스를 검색하고, 유사도 점수/필터/랭킹을 포함해 반환하는 엔드포인트를 구현한다.",
        "details": "In /api/routes/cases.py, implement:\n- POST /api/v1/cases/search endpoint\n- Request body: query (ToonLog or free text), top_k (default 5), similarity_threshold (default 0.7), filters (iflow_id, adapter_type, date_range)\n- Call vector_db.search_similar_cases()\n- Return List[Case] with similarity scores\n- Include metadata: total_matches, search_time_ms\n- Support both structured (ToonLog) and unstructured (text) queries\n- Implement result ranking by similarity + recency (weighted)\n- Add response caching",
        "testStrategy": "ToonLog/자유 텍스트, 다양한 필터, top_k/threshold 조합을 테스트한다. 랭킹/필터링/캐시 동작과 빈 DB 케이스를 검증한다.",
        "priority": "medium",
        "dependencies": [
          "10",
          "12"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "16",
        "title": "케이스 관리 API(CRUD) 구현",
        "description": "저장된 에러 케이스에 대한 조회/목록/수정/삭제(소프트 삭제) CRUD 엔드포인트를 구현한다.",
        "details": "In /api/routes/cases.py, implement:\n- GET /api/v1/cases/{case_id} - retrieve single case\n- GET /api/v1/cases - list cases with pagination, filtering (iflow_id, error_type, date_range), sorting\n- PUT /api/v1/cases/{case_id} - update case metadata or analysis\n- DELETE /api/v1/cases/{case_id} - soft delete case (mark as archived)\n- Implement query parameters: page, page_size, sort_by, order\n- Add response models with proper serialization\n- Implement authorization checks (future: user-based access)\n- Return 404 for non-existent cases",
        "testStrategy": "CRUD, 페이지네이션/필터/정렬을 검증한다. 존재하지 않는 case_id의 404, 유효성 오류, 페이지 범위 초과 등 엣지 케이스를 테스트한다.",
        "priority": "medium",
        "dependencies": [
          "9",
          "12"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "17",
        "title": "Streamlit 앱 구조/네비게이션 구성",
        "description": "Streamlit 멀티페이지 구조와 네비게이션/세션 상태를 구성하고, FastAPI 백엔드 호출용 공통 API 클라이언트를 만든다.",
        "details": "In /ui/app.py, create Streamlit app:\n- Configure page: st.set_page_config(page_title='SAP IS Error Analysis', layout='wide')\n- Set up session state for: api_base_url, selected_log, analysis_result, search_results\n- Create sidebar navigation with pages: 'Log Browser', 'Error Analysis', 'Case Search', 'Test Automation' (disabled initially)\n- Implement page routing using st.sidebar.radio() or pages/ directory structure\n- Add header with app title and description\n- Create /ui/utils/api_client.py for API calls to FastAPI backend\n- Implement error handling and user feedback (st.error, st.success, st.warning)",
        "testStrategy": "`streamlit run ui/app.py`로 실행해 네비게이션/세션 상태 유지/페이지 로딩 오류 여부를 확인한다.",
        "priority": "high",
        "dependencies": [
          "1"
        ],
        "status": "done",
        "subtasks": []
      },
      {
        "id": "18",
        "title": "Streamlit 로그 브라우저 페이지 구현",
        "description": "FAILED 로그를 기간/iFlow로 조회하고 테이블로 보여주며, 선택한 로그 상세 보기 및 분석 트리거까지 제공하는 UI를 구현한다.",
        "details": "In /ui/pages/log_browser.py, implement:\n- Date/time range picker using st.date_input() and st.time_input()\n- Optional iFlow ID text input with autocomplete (if available)\n- 'Fetch Logs' button triggering API call to /api/v1/logs/fetch\n- Display results in st.dataframe() with columns: timestamp, iflow_id, error_message (truncated), adapter_type, status\n- Implement row selection for detailed view\n- Show log details in expandable section with full error message\n- Add 'Analyze This Error' button for selected log\n- Implement loading states with st.spinner()\n- Add export functionality (CSV download)",
        "testStrategy": "기간 선택/조회/표시/행 선택/에러 처리(결과 없음, API 오류)를 확인한다. UI 응답성과 표시 포맷을 검증한다.",
        "priority": "high",
        "dependencies": [
          "13",
          "17"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "19",
        "title": "Streamlit 오류 분석 페이지 구현",
        "description": "오류 분석 결과를 원인/근거/해결책/신뢰도 등 구조화된 UI로 표시하고, 유사 케이스 연결 및 피드백 기능을 제공한다.",
        "details": "In /ui/pages/error_analysis.py, implement:\n- Display selected ToonLog summary at top (iflow_id, timestamp, error_message)\n- 'Run Analysis' button triggering API call to /api/v1/analysis/analyze\n- Show analysis progress with st.spinner() or st.progress()\n- Display ErrorAnalysis results in structured format:\n  - Error Type badge with color coding\n  - Root Causes as numbered list with evidence in expandable sections\n  - Solution Steps as actionable checklist\n  - Confidence Level with visual indicator (high=green, medium=yellow, low=red)\n  - Assumptions section clearly labeled\n- Show similar cases found (count and links)\n- Add 'View Similar Cases' button\n- Implement markdown rendering for formatted text\n- Add feedback mechanism (thumbs up/down for analysis quality)",
        "testStrategy": "신뢰도 레벨별/유사 케이스 유무별 다양한 결과를 테스트한다. 마크다운 렌더링/확장 섹션/피드백 제출 동작을 검증한다.",
        "priority": "high",
        "dependencies": [
          "14",
          "17"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "20",
        "title": "Streamlit 케이스 검색 페이지 구현",
        "description": "텍스트/필터로 과거 케이스를 검색하고, 유사도 점수와 상세 내용을 카드 형태로 보여주는 UI를 구현한다.",
        "details": "In /ui/pages/case_search.py, implement:\n- Search input: text area for free-text query or structured filters (iflow_id, adapter_type, error_type)\n- Advanced filters in st.expander(): date range, similarity threshold, top_k slider\n- 'Search' button triggering API call to /api/v1/cases/search\n- Display results as cards with: similarity score (progress bar), error type, timestamp, iflow_id\n- Click on card to expand full case details (root causes, solutions)\n- Implement sorting: by similarity, by date\n- Add 'Apply This Solution' button to copy solution steps\n- Show 'No results found' message with suggestions\n- Implement result pagination",
        "testStrategy": "텍스트 검색/필터 조합/threshold 조절/정렬/페이지네이션을 테스트한다. 점수 표시/카드 확장/빈 결과 안내를 검증한다.",
        "priority": "medium",
        "dependencies": [
          "15",
          "17"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "21",
        "title": "SAP IS Test API 클라이언트 구현",
        "description": "SAP IS Test API를 호출해 테스트 실행/결과 조회/테스트 목록 조회를 지원하는 클라이언트를 구현한다.",
        "details": "In /services/sap_is_test_client.py, implement SAPISTestClient class:\n- __init__(base_url, api_key) from config\n- execute_test(test_id, parameters=None) method to trigger test execution\n- get_test_result(execution_id) method to retrieve test results\n- list_tests(iflow_id=None) method to get available tests\n- Use requests library with authentication\n- Handle async test execution (poll for completion or webhook)\n- Parse test results: status (PASSED/FAILED), execution_time, error_details\n- Implement timeout handling for long-running tests\n- Return structured TestResult objects",
        "testStrategy": "응답을 모킹해 execute/get/list를 검증한다. 폴링 로직/timeout/결과 파싱(PASSED/FAILED)을 테스트한다.",
        "priority": "low",
        "dependencies": [
          "3"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "22",
        "title": "테스트 실행 데이터 모델 정의",
        "description": "테스트 자동화를 위한 요청/결과/메타데이터 Pydantic 모델을 정의해 API 연동에 필요한 스키마를 확정한다.",
        "details": "In /models/schemas.py, add:\n- TestMetadata: test_id, test_name, iflow_id, description, parameters_schema\n- TestExecutionRequest: test_id, parameters (dict), execution_mode (sync/async)\n- TestResult: execution_id, test_id, status (PASSED/FAILED/RUNNING), started_at, completed_at, duration_ms, error_details (optional), logs (optional)\n- TestExecutionResponse: execution_id, status, result (TestResult when complete)\nEnsure proper validation and serialization for API integration.",
        "testStrategy": "모델 생성/검증/JSON 직렬화 테스트를 작성하고, optional 필드 및 status 값 변형을 검증한다.",
        "priority": "low",
        "dependencies": [
          "2"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "23",
        "title": "테스트 실행 API 엔드포인트 구현",
        "description": "테스트 목록/실행/결과 조회용 FastAPI 엔드포인트를 구현하고, 비동기 실행 및 실패 시 분석 연계를 지원한다.",
        "details": "In /api/routes/tests.py, implement:\n- GET /api/v1/tests - list available tests with optional iflow_id filter\n- POST /api/v1/tests/execute - execute a test with TestExecutionRequest body\n- GET /api/v1/tests/executions/{execution_id} - get test result\n- GET /api/v1/tests/executions - list recent test executions with pagination\n- Implement async execution: return 202 Accepted with execution_id immediately\n- Add polling endpoint or WebSocket for real-time status updates\n- Link FAILED test results to analysis workflow (auto-trigger analysis)\n- Implement execution history storage",
        "testStrategy": "목록/실행(동기·비동기)/결과 조회/폴링을 테스트한다. 테스트 클라이언트를 모킹하고, FAILED 시 자동 분석 트리거와 동시 실행을 검증한다.",
        "priority": "low",
        "dependencies": [
          "21",
          "22",
          "12"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "24",
        "title": "Streamlit 테스트 자동화 페이지 구현",
        "description": "테스트 선택→실행→상태/결과 표시 UI를 만들고, 실패 테스트는 오류 분석으로 연결한다.",
        "details": "In /ui/pages/test_automation.py, implement:\n- Test selection dropdown populated from /api/v1/tests\n- Parameter input form (dynamic based on test parameters_schema)\n- 'Execute Test' button triggering API call\n- Real-time execution status display with progress indicator\n- Test result display: status badge, duration, timestamp\n- For FAILED tests: show error details and 'Analyze Error' button\n- Test execution history table with filters (status, date range)\n- Click on history row to view details\n- Implement auto-refresh for running tests\n- Add bulk test execution (select multiple tests)",
        "testStrategy": "테스트 선택/파라미터 입력/실행/상태 업데이트/결과 표시를 검증한다. FAILED 시 분석 연결, RUNNING/PASSED/FAILED 시나리오를 테스트한다.",
        "priority": "low",
        "dependencies": [
          "23",
          "17"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "25",
        "title": "로깅/모니터링 인프라 구현",
        "description": "API/LLM/벡터검색 등 주요 구간의 구조적 로깅과 에러 추적, 성능 지표 수집을 위한 모니터링 기반을 구축한다.",
        "details": "In /utils/logging.py, implement:\n- Configure structured logging with JSON format for production\n- Set up log levels per module (configurable via environment)\n- Implement request/response logging middleware for FastAPI\n- Add correlation IDs for request tracing across services\n- Log key metrics: API latency, LLM token usage, vector search time, cache hit rates\n- Implement error tracking with stack traces\n- Add performance profiling decorators for critical functions\n- Configure log rotation and retention\n- Optional: integrate with external monitoring (e.g., Prometheus, Grafana)",
        "testStrategy": "API 요청/오류/핵심 작업에 대한 로그가 생성되는지 확인한다. 로그 포맷/Correlation ID/지표 로그를 검증하고, 로테이션/레벨 필터링을 테스트한다.",
        "priority": "medium",
        "dependencies": [
          "12"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "26",
        "title": "API 응답 캐싱 레이어 구현",
        "description": "중복 호출을 줄이기 위해 SAP IS 조회/유사검색/LLM 분석 결과에 TTL 기반 캐시를 적용해 성능과 비용을 개선한다.",
        "details": "In /utils/cache.py, implement caching using:\n- In-memory cache with TTL (e.g., cachetools or functools.lru_cache)\n- Cache keys based on request parameters (hash of inputs)\n- Cache SAP IS log fetch results (5-10 min TTL)\n- Cache similar case search results (15 min TTL)\n- Cache LLM analysis results (persistent, invalidate on manual update)\n- Implement cache invalidation strategies\n- Add cache statistics endpoint for monitoring\n- Configure cache size limits\n- Optional: use Redis for distributed caching in production",
        "testStrategy": "cache hit/miss, TTL 만료, 무효화 전략을 테스트한다. 캐시 적용 전후 성능 개선을 확인하고, 최대 크기/퇴출 정책을 검증한다.",
        "priority": "medium",
        "dependencies": [
          "12"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "27",
        "title": "데이터 마스킹/보안 유틸리티 구현",
        "description": "로그 내 민감정보 마스킹과 API 키 검증, rate limit, 보안 헤더 등 기본 보안 유틸리티를 구현한다.",
        "details": "In /utils/security.py, implement:\n- mask_sensitive_data(text) function using regex patterns for:\n  - Email addresses → e***@domain.com\n  - Phone numbers → +**-***-**-1234\n  - API keys/tokens → ***key (show last 3 chars)\n  - Credit card numbers, SSNs, etc.\n- validate_api_key() for API authentication\n- Implement rate limiting decorator\n- Add input sanitization for user inputs (prevent injection)\n- Implement CORS configuration helper\n- Add security headers middleware (HSTS, CSP, X-Frame-Options)\n- Create audit logging for sensitive operations",
        "testStrategy": "민감정보 패턴별 마스킹을 테스트한다. API 키 검증과 rate limit, 입력 정화, 응답 보안 헤더 적용 여부를 검증한다.",
        "priority": "high",
        "dependencies": [
          "1"
        ],
        "status": "done",
        "subtasks": [],
        "updatedAt": "2025-12-16T12:03:42.416Z"
      },
      {
        "id": "28",
        "title": "Docker 컨테이너 구성",
        "description": "API/UI/ChromaDB를 Docker로 컨테이너화하고 docker-compose로 통합 실행/영속 볼륨/헬스체크를 구성한다.",
        "details": "Create:\n- Dockerfile.api for FastAPI backend (multi-stage build, Python 3.11 slim base)\n- Dockerfile.ui for Streamlit frontend\n- docker-compose.yml with services: api, ui, chromadb (if using server mode)\n- Configure environment variables via .env file\n- Set up volume mounts for ChromaDB persistence\n- Configure networking between services\n- Add health checks for each service\n- Create .dockerignore file\n- Document port mappings (API: 8000, UI: 8501)\n- Add docker-compose.dev.yml for development with hot reload",
        "testStrategy": "이미지가 빌드되는지 확인하고, `docker-compose up`으로 서비스가 모두 기동되는지 검증한다. 서비스 간 통신과 재시작 후 데이터 유지(영속성)를 확인한다. .env 설정으로 동작하는지 테스트한다.",
        "priority": "medium",
        "dependencies": [
          "12",
          "17"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "29",
        "title": "에러 처리/사용자 피드백 표준화",
        "description": "API/UI 전반의 예외 처리를 표준화하고, 사용자 친화적 메시지와 일관된 HTTP 응답 스키마를 제공한다.",
        "details": "In /utils/errors.py, implement:\n- Custom exception classes: SAPISAPIError, LLMError, VectorDBError, ValidationError\n- Exception handlers for FastAPI returning consistent error responses\n- Error response schema: {error_code, message, details, timestamp, request_id}\n- Map exceptions to appropriate HTTP status codes\n- In Streamlit, implement error display helpers:\n  - show_error(message, details) with expandable details\n  - show_warning(), show_success()\n- Add user-friendly error messages (avoid technical jargon)\n- Implement retry suggestions for transient errors\n- Log all errors with full context",
        "testStrategy": "API 오류/검증 오류/LLM 실패 등 다양한 시나리오를 유발해 상태코드·메시지·UI 표시에 문제가 없는지 확인한다. 에러 로그가 충분한 컨텍스트로 남는지 검증한다.",
        "priority": "medium",
        "dependencies": [
          "12",
          "17"
        ],
        "status": "pending",
        "subtasks": []
      },
      {
        "id": "30",
        "title": "문서/배포 가이드 작성",
        "description": "사용자/개발자 관점의 문서(설치, API, 배포, 아키텍처, 트러블슈팅)를 작성해 재현 가능한 온보딩과 운영을 지원한다.",
        "details": "Create documentation:\n- README.md: project overview, features, quick start\n- SETUP.md: detailed setup instructions, prerequisites, environment configuration\n- API_DOCS.md: API endpoint documentation (or use FastAPI auto-docs)\n- USER_GUIDE.md: UI walkthrough, common workflows, troubleshooting\n- DEPLOYMENT.md: Docker deployment, production considerations, scaling\n- ARCHITECTURE.md: system architecture, component interactions, data flow\n- CONTRIBUTING.md: development guidelines, code style, testing\n- Add inline code documentation (docstrings)\n- Create example .env file with all required variables\n- Document SAP IS API setup requirements\n- Add troubleshooting section for common issues",
        "testStrategy": "완전히 깨끗한 환경에서 문서만 따라 셋업이 가능한지 검증한다. 모든 절차가 실제로 동작하는지 확인하고, API 문서 정확성과 사용자 가이드를 리뷰한다.",
        "priority": "medium",
        "dependencies": [
          "28"
        ],
        "status": "pending",
        "subtasks": []
      }
    ],
    "metadata": {
      "version": "1.0.0",
      "lastModified": "2025-12-16T12:42:27.013Z",
      "taskCount": 30,
      "completedCount": 9,
      "tags": [
        "master"
      ]
    }
  }
}